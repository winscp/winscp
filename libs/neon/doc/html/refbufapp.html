<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ne_buffer_append</title><link rel="stylesheet" type="text/css" href="manual.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><link rel="home" href="index.html" title="neon HTTP/WebDAV client library"><link rel="up" href="ref.html" title="neon API reference"><link rel="prev" href="refbuf.html" title="ne_buffer"><link rel="next" href="refbufutil.html" title="ne_buffer_clear"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ne_buffer_append</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="refbuf.html">Prev</a> </td><th width="60%" align="center">neon API reference</th><td width="20%" align="right"> <a accesskey="n" href="refbufutil.html">Next</a></td></tr></table><hr></div><div class="refentry"><a name="refbufapp"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ne_buffer_append, ne_buffer_zappend, ne_buffer_qappend, ne_buffer_concat, ne_buffer_snprintf — append data to a string buffer</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;ne_string.h&gt;</pre><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="funcprototype"><code><code xmlns="" class="funcdef">void <b class="fsfunc">ne_buffer_append</b>(</code>ne_buffer *<var xmlns="" class="pdparam">buf</var>, const char *<var xmlns="" class="pdparam">string</var>, size_t <var xmlns="" class="pdparam">len</var><code xmlns="">)</code>;</code></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="funcprototype"><code><code xmlns="" class="funcdef">void <b class="fsfunc">ne_buffer_zappend</b>(</code>ne_buffer *<var xmlns="" class="pdparam">buf</var>, const char *<var xmlns="" class="pdparam">string</var><code xmlns="">)</code>;</code></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="funcprototype"><code><code xmlns="" class="funcdef">void <b class="fsfunc">ne_buffer_qappend</b>(</code>ne_buffer *<var xmlns="" class="pdparam">buf</var>, const char *<var xmlns="" class="pdparam">string</var>, size_t <var xmlns="" class="pdparam">len</var><code xmlns="">)</code>;</code></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="funcprototype"><code><code xmlns="" class="funcdef">void <b class="fsfunc">ne_buffer_concat</b>(</code>ne_buffer *<var xmlns="" class="pdparam">buf</var>, ...<code xmlns="">)</code>;</code></div><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="funcprototype"><code><code xmlns="" class="funcdef">size_t <b class="fsfunc">ne_buffer_snprintf</b>(</code>ne_buffer *<var xmlns="" class="pdparam">buf</var>, size_t <var xmlns="" class="pdparam">max</var>, const char *<var xmlns="" class="pdparam">format</var>, ...<code xmlns="">)</code>;</code></div></div></div><div class="refsect1"><a name="id2107"></a><h2>Description</h2><p>The <code class="function">ne_buffer_append</code> and
<code class="function">ne_buffer_zappend</code> functions append a string to
the end of a buffer; extending the buffer as necessary.  The
<code class="parameter">len</code> passed to
<code class="function">ne_buffer_append</code> specifies the length of the
string to append; there must be no <code class="literal">NUL</code> terminator in the first
<code class="parameter">len</code> bytes of the string.
<code class="function">ne_buffer_zappend</code> must be passed a
<code class="literal">NUL</code>-terminated string.</p><p>The <code class="function">ne_buffer_qappend</code> function
	behaves similarly to <code class="function">ne_buffer_append</code>,
	except that any non-ASCII characters or ASCII control
	characters are escaped using C-style hex escaping. For
	example, the C string <code class="literal">"foo&lt;TAB&gt;bar"</code>,
	where TAB represents ASCII character 9, would be appended as
	<code class="literal">"foo\x09bar"</code>. Any <code class="literal">NUL</code> bytes within the
	length specified are also escaped. This function is useful to
	make strings from untrusted sources safe for logging or output
	in a user interface.</p><p>The <code class="function">ne_buffer_concat</code> function takes
	a variable-length argument list; each argument must be a
	<em class="type">char *</em> pointer to a <code class="literal">NUL</code>-terminated string.  A
	<code class="literal">NULL</code> pointer must be given as the last argument to mark the
	end of the list.  The strings are appended to the buffer in
	the order given. None of the strings passed to
	<code class="function">ne_buffer_concat</code> are modified.</p><p>The <code class="function">ne_buffer_snprintf</code> function behaves
like <code class="function">snprintf</code>, appending the output string
formatted according to the <code class="parameter">format</code> parameter.
At most <code class="parameter">max</code> bytes are written including the
trailing <code class="literal">NUL</code> terminator.</p></div><div class="refsect1"><a name="id2136"></a><h2>Return value</h2><p>The <code class="function">ne_buffer_snprintf</code> function
        returns the number of bytes appended
        <span class="emphasis"><em>excluding</em></span> the trailing <code class="literal">NUL</code>
        terminator.</p></div><div class="refsect1"><a name="id2142"></a><h2>Examples</h2><p>The following code will output "<code class="literal">Hello, world.
And goodbye.</code>".</p><pre class="programlisting">ne_buffer *buf = ne_buffer_create();
ne_buffer_zappend(buf, "Hello");
ne_buffer_concat(buf, ", world. ", "And ", NULL);
ne_buffer_snprintf(buf, 10, "%s.", "goodbye");
puts(buf-&gt;data);
ne_buffer_destroy(buf);</pre></div><div class="refsect1"><a name="id2147"></a><h2>See also</h2><p><a class="xref" href="refbuf.html#ne_buffer">ne_buffer</a>, <a class="xref" href="refbufcr.html#ne_buffer_create">ne_buffer_create</a>,
<a class="xref" href="refbufdest.html#ne_buffer_destroy">ne_buffer_destroy</a></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="refbuf.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ref.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="refbufutil.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ne_buffer </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> ne_buffer_clear</td></tr></table></div></body></html>
